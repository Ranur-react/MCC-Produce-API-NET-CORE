@{
    Layout = "_LayoutLatihan";
}

<table class="table table-hover " id="EmployeeTable">
    <thead>
        <tr>
            <th scope="col">No.</th>
            <th scope="col">Name</th>
            <th scope="col">NIK</th>
            <th scope="col">Phone</th>
            <th scope="col">Gender</th>
            <th scope="col">E-mail</th>
            <th scope="col">Birth Date</th>
            <th scope="col">Sallary</th>
            <th scope="col">Gpa</th>
            <th scope="col">Degre</th>
            <th scope="col">University Name</th>
            <th scope="col">Actions</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <th scope="row">1</th>
            <td>x</td>
            <td>Otto</td>
            <td>X</td>
        </tr>
    </tbody>
</table>
@section Scripts{
<script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.1.0/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.html5.min.js"></script>
<script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/2.1.0/js/buttons.print.min.js"></script>
}

<script>
    var formatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'IDR'
    });



    $(document).ready(function () {
        $('#EmployeeTable').DataTable({

            'ajax': {
                'url': "https://localhost:44321/api/Employees/RegisteredData",
                'dataType': 'json',
                'dataSrc': 'result',
            },
            dom: 'Bfrtip',
            buttons: [
                {
                    extend: 'excelHtml5',
                    className: 'btn btn-outline-success rounded-circle ',
                    text:'<i class="fas fa-file-excel"></i>',
                    title: 'Data Karyawan',
                    exportOptions: {
                        columns: [2, 1, 3, 4,5,6,7,8,9,10]
                    }
                },
                {
                    extend: 'pdfHtml5',
                    text: '<i class="fas fa-file-pdf"></i>',
                    className: 'btn btn-outline-secondary rounded-circle ',
                    title: 'Data Karyawan',
                    exportOptions: {
                        columns: [2, 1, 3, 4, 5, 6, 7, 8, 9, 10]
                    }
                },
                {
                    extend: 'print',
                    text: '<i class="fas fa-print"></i>',
                    className: 'btn btn-outline-secondary rounded-circle ',
                    title: 'Data Karyawan',
                    exportOptions: {
                        columns: [2, 1, 3, 4, 5, 6, 7, 8, 9, 10]
                    }
                },
            ],

            'columns': [
                {
                    'data': null,
                    'render': (data, type, row, meta) => {
                        return (meta.row + meta.settings._iDisplayStart + 1) + ".";
                    }
                },
                {
                    'data': 'fullName'
                },
                {
                    'data': 'nik'
                },
                {
                    'data': 'phoneNumber'
                },
                {
                    'data': 'gender',
                    'bSortable': false

                },
                {
                    'data': 'email'
                },
                {
                    'data': null,
                    'render': (data, type, row) => {
                        var dateGet = new Date(row['birthDate']);
                        
                        return dateGet.toLocaleDateString();
                    }
                },
                {
                    'data': null,
                    'render': (data, type, row) => formatter.format(row['salary'])
                },
                {
                    'data': 'gpa'
                },
                {
                    'data': 'degree'
                },
                {
                    'data': 'universityName'
                },
                {
                    'data': null,
                    'render': (data, type, row) => {
                        return `<div class="btn-group" role="group" aria-label="Basic example">
                                  <button type="button" onclick="Edit('${row['nik']}')" class="btn btn-outline-success rounded-circle "><i class="fas fa-edit"></i></button>
                                  <button type="button" onclick="Remove('${row['nik']}')" class="btn btn-outline-danger rounded-circle"><i class="fas fa-trash"></i></button>
                                </div>`
                    },
                    'bSortable': false
                }

            ],


        });
    });
</script>